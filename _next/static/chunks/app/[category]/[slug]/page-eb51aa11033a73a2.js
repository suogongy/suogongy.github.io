(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{4092:function(e,r,t){Promise.resolve().then(t.bind(t,5546)),Promise.resolve().then(t.t.bind(t,2972,23))},5546:function(e,r,t){"use strict";t.d(r,{default:function(){return s}});var n=t(7437),i=t(2265),l=t(7970);function a(e){let{chart:r,id:t}=e,l=(0,i.useRef)(null),[a,o]=(0,i.useState)(!1),[d,s]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=()=>{window.mermaid?o(!0):setTimeout(e,100)};e()},[]),(0,i.useEffect)(()=>{if(!a||!l.current)return;let e=window.mermaid;try{e.initialize({startOnLoad:!1,theme:"default",themeVariables:{primaryColor:"#3b82f6",primaryTextColor:"#1f2937",primaryBorderColor:"#2563eb",lineColor:"#6b7280",secondaryColor:"#10b981",tertiaryColor:"#f59e0b",background:"#ffffff",mainBkg:"#f3f4f6",secondBkg:"#e5e7eb",tertiaryBkg:"#fef3c7",primaryBorderColor:"#2563eb",secondaryBorderColor:"#059669",tertiaryBorderColor:"#d97706"},flowchart:{useMaxWidth:!0,htmlLabels:!0,curve:"basis",padding:20},themeCSS:"\n          .node rect,\n          .node circle,\n          .node ellipse,\n          .node polygon {\n            fill: #f8fff8;\n            stroke: #4caf50;\n            stroke-width: 2px;\n          }\n          .edgePath .path {\n            stroke: #6b7280;\n            stroke-width: 2px;\n          }\n          .edgeLabel {\n            background-color: #ffffff;\n            color: #1f2937;\n          }\n          .cluster rect {\n            fill: #e8f4fd;\n            stroke: #2196f3;\n            stroke-width: 2px;\n          }\n          .titleText {\n            fill: #1f2937;\n            font-size: 18px;\n            font-weight: bold;\n          }\n        "});let n=t||"mermaid-".concat(Math.random().toString(36).substring(2,11));e.render(n,r.trim()).then(e=>{l.current&&(l.current.innerHTML=e.svg,s(null))}).catch(e=>{console.error("Mermaid rendering error:",e),s(e.message||"Mermaid渲染失败"),l.current&&(l.current.innerHTML='<div class="mermaid-error" style="color: #ef4444; padding: 1rem; border: 1px solid #fecaca; background-color: #fef2f2; border-radius: 0.5rem; margin: 1rem 0;">\n            <strong>Mermaid渲染错误:</strong> '.concat(e.message||"未知错误",'\n            <details style="margin-top: 0.5rem;">\n              <summary style="cursor: pointer; color: #6b7280;">查看原始代码</summary>\n              <pre style="background: #f3f4f6; padding: 0.5rem; margin-top: 0.5rem; border-radius: 0.25rem; overflow-x: auto; font-size: 0.875rem;">').concat(r,"</pre>\n            </details>\n          </div>"))})}catch(e){console.error("Mermaid initialization error:",e),s("Mermaid初始化失败")}},[r,t,a]),(0,n.jsx)("div",{ref:l,className:"mermaid-container",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"1.5rem 0",overflow:"auto",minHeight:"200px",border:d?"1px solid #fecaca":"none",borderRadius:"0.5rem",background:d?"#fef2f2":"transparent"},children:!a&&(0,n.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:"正在加载Mermaid图表..."})})}function o(e){let{content:r,id:t}=e,l=(0,i.useRef)(null),a=(0,i.useRef)(null),[o,d]=(0,i.useState)("loading"),s=(0,n.jsxs)("div",{style:{padding:"2rem",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",margin:"1rem 0"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 1rem 0",color:"#1f2937",fontSize:"1.25rem"},children:"MQ选型维度"}),(0,n.jsxs)("div",{style:{display:"grid",gap:"1rem"},children:[(0,n.jsxs)("div",{style:{background:"#dcfce7",padding:"1rem",borderRadius:"0.375rem",borderLeft:"4px solid #22c55e"},children:[(0,n.jsx)("strong",{style:{color:"#166534"},children:"性能要求"}),(0,n.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#374151"},children:[(0,n.jsx)("li",{children:"吞吐量"}),(0,n.jsx)("li",{children:"延迟"}),(0,n.jsx)("li",{children:"并发能力"})]})]}),(0,n.jsxs)("div",{style:{background:"#fed7aa",padding:"1rem",borderRadius:"0.375rem",borderLeft:"4px solid #fb923c"},children:[(0,n.jsx)("strong",{style:{color:"#9a3412"},children:"功能需求"}),(0,n.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#374151"},children:[(0,n.jsx)("li",{children:"消息顺序"}),(0,n.jsx)("li",{children:"事务消息"}),(0,n.jsx)("li",{children:"消息重试"}),(0,n.jsx)("li",{children:"死信队列"})]})]}),(0,n.jsxs)("div",{style:{background:"#e9d5ff",padding:"1rem",borderRadius:"0.375rem",borderLeft:"4px solid #c084fc"},children:[(0,n.jsx)("strong",{style:{color:"#6b21a8"},children:"可靠性"}),(0,n.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#374151"},children:[(0,n.jsx)("li",{children:"数据持久化"}),(0,n.jsx)("li",{children:"集群支持"}),(0,n.jsx)("li",{children:"故障恢复"}),(0,n.jsx)("li",{children:"数据备份"})]})]}),(0,n.jsxs)("div",{style:{background:"#fce7f3",padding:"1rem",borderRadius:"0.375rem",borderLeft:"4px solid #f9a8d4"},children:[(0,n.jsx)("strong",{style:{color:"#9f1239"},children:"运维复杂度"}),(0,n.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#374151"},children:[(0,n.jsx)("li",{children:"部署难度"}),(0,n.jsx)("li",{children:"监控能力"}),(0,n.jsx)("li",{children:"故障排查"}),(0,n.jsx)("li",{children:"扩展性"})]})]}),(0,n.jsxs)("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"0.375rem",borderLeft:"4px solid #60a5fa"},children:[(0,n.jsx)("strong",{style:{color:"#1d4ed8"},children:"生态系统"}),(0,n.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#374151"},children:[(0,n.jsx)("li",{children:"社区活跃度"}),(0,n.jsx)("li",{children:"文档完整性"}),(0,n.jsx)("li",{children:"工具支持"}),(0,n.jsx)("li",{children:"学习成本"})]})]})]})]});return(0,i.useEffect)(()=>{if(!l.current)return;d("loading");let e=()=>{let e=window,r=null,t=null;if(e.markmap&&("function"==typeof e.markmap?r=e.markmap:e.markmap.Markmap?(r=e.markmap.Markmap,t=e.markmap.transform):Object.keys(e.markmap).forEach(t=>{(t.toLowerCase().includes("mark")||"function"==typeof e.markmap[t])&&!r&&(r=e.markmap[t])})),r||["Markmap","markmap","mm"].forEach(t=>{e[t]&&"function"==typeof e[t]&&(r=e[t])}),!t&&e.d3&&e.d3.markmap&&(t=e.d3.markmap.transform),!r&&e.markmapView&&e.markmapView.Markmap?r=e.markmapView.Markmap:!r&&e.Markmap&&(r=e.Markmap),r){var n;window._tempMarkmap={Markmap:r,transform:t||(null===(n=e.markmap)||void 0===n?void 0:n.transform)}}return!!r},r=0,t=()=>{r++,e()?n():r<20?setTimeout(t,500):d("fallback")},n=()=>{if(l.current)try{let e=window._tempMarkmap;e&&e.Markmap?d("ready"):d("fallback")}catch(e){d("fallback")}};setTimeout(t,100)},[r,t]),(0,i.useEffect)(()=>{if("ready"===o&&a.current&&l.current)try{let e=window._tempMarkmap;if(!e||!e.Markmap){d("fallback");return}let{Markmap:t,transform:n}=e,i=t.create(a.current,{duration:300,autoFit:!0,initialExpandLevel:2,paddingX:12,paddingY:12,spacingVertical:15,spacingHorizontal:100,maxWidth:300,color:e=>{let r=e.content||"";return r.includes("性能要求")?"#4caf50":r.includes("功能需求")?"#ff9800":r.includes("可靠性")?"#9c27b0":r.includes("运维复杂度")?"#e91e63":r.includes("生态系统")?"#03a9f4":"#6b7280"}}),l=(n||function(e){let r=e.split("\n"),t="MQ选型",n=!1;for(let e of r){let r=e.match(/^#\s+(.+)$/);if(r&&!n){t=r[1].trim(),n=!0;break}}let i={content:t,children:[]},l=[i];return r.forEach(e=>{let r=e.trim();if(!r)return;let a=e.match(/^(#+)\s+(.+)$/);if(a){let e=a[1].length,r=a[2].trim();if(1===e&&r===t){n=!0;return}let i={content:r,children:[]};for(;l.length>Math.max(1,e-1);)l.pop();l[l.length-1].children.push(i),l.push(i);return}let o=e.match(/^(\s*)[-*+]\s+(.+)$/);if(o){let e=o[1].length,r={content:o[2].trim(),children:[]},t=Math.floor(e/2)+1;for(;l.length>1&&t<l.length-1;)l.pop();1===l.length?i.children.push(r):l[l.length-1].children.push(r),l.push(r);return}if(l.length>1&&r){let e=l[l.length-1];e.content&&!e.children.length&&(e.content+=" "+r)}}),i})(r);i.setData(l),i.fit()}catch(e){d("fallback")}},[o,r]),(0,n.jsxs)("div",{ref:l,className:"markmap-container",style:{margin:"1.5rem 0",borderRadius:"0.5rem",overflow:"hidden",minHeight:"400px",background:"loading"===o?"#f9fafb":"transparent"},children:["loading"===o&&(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[(0,n.jsx)("div",{children:"正在加载思维导图..."}),(0,n.jsx)("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"检查CDN依赖加载状态"})]}),"ready"===o&&(0,n.jsx)("svg",{ref:a,style:{width:"100%",height:"400px"}}),"fallback"===o&&s]})}var d=t(1740);function s(e){let{content:r}=e,t=(0,i.useRef)(null);l.TU.setOptions({highlight:function(e,r){return r&&d.Z.getLanguage(r)?d.Z.highlight(e,{language:r}).value:d.Z.highlightAuto(e).value},breaks:!0,gfm:!0,langPrefix:"hljs language-"});let{processedParts:s,mermaidBlocks:c,markmapBlocks:m}=(0,i.useMemo)(()=>{let e=[],t=[],n=0;return{processedParts:r.split(/(```(?:mermaid|markmap)[\r\n]+[\s\S]*?```)/g).map(r=>{let i=r.match(/```mermaid[\r\n]+([\s\S]*?)```/);if(i){let r="mermaid-".concat(Math.random().toString(36).substring(2,11)),t=i[1].trim();return e.push({id:r,chart:t,position:n}),n++,{type:"mermaid",id:r,chart:t}}let a=r.match(/```markmap[\r\n]+([\s\S]*?)```/);if(a){let e="markmap-".concat(Math.random().toString(36).substring(2,11)),r=a[1].trim();return t.push({id:e,content:r,position:n}),n++,{type:"markmap",id:e,content:r}}if(r.trim()){let e=l.TU.parse(r);return{type:"html",content:e=(e=e.replace(/<table([^>]*)>/g,(e,r)=>'<div class="table-wrapper"><table'.concat(r,' style="width: auto;">'))).replace(/<\/table>/g,"</table></div>")}}return null}).filter(Boolean),mermaidBlocks:e,markmapBlocks:t}},[r]);return(0,i.useEffect)(()=>{t.current&&t.current.querySelectorAll(".table-wrapper").forEach(e=>{let r=e.querySelector("table");if(r&&e instanceof HTMLElement){let t=r.scrollWidth;e.style.minWidth="".concat(t,"px"),e.style.width="fit-content",e.style.width="-moz-fit-content"}})},[s]),(0,n.jsx)("div",{className:"markdown-content",ref:t,children:s.map((e,r)=>e&&"html"===e.type?(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}},"html-".concat(r)):e&&"mermaid"===e.type?(0,n.jsx)(a,{chart:e.chart,id:e.id},e.id):e&&"markmap"===e.type?(0,n.jsx)(o,{content:e.content,id:e.id},e.id):null)})}}},function(e){e.O(0,[972,832,971,117,744],function(){return e(e.s=4092)}),_N_E=e.O()}]);